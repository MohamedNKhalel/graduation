"use strict";(self.webpackChunkgraduation=self.webpackChunkgraduation||[]).push([[395],{7395:(q,p,l)=>{l.r(p),l.d(p,{ProfileComponent:()=>J});var u=l(5861),_=l(6814),s=l(95),g=l(8098),e=l(5879),f=l(872),h=l(981),x=l(4186),v=l(2425),P=l(2848),m=l(4170),C=l(2032),d=l(7680);function Z(o,a){if(1&o&&(e.TgZ(0,"div",22)(1,"div"),e._UZ(2,"img",23),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("src",null==t.user?null:t.user.photoURL,e.LSH)}}function T(o,a){if(1&o&&(e.TgZ(0,"div",24)(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"div",25)(4,"h3"),e._uU(5),e.qZA(),e._UZ(6,"i",26),e.qZA(),e.TgZ(7,"h3"),e._uU(8),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.hij("Name : ",null==t.user?null:t.user.displayName,""),e.xp6(3),e.hij("Email : ",null==t.user?null:t.user.email,""),e.xp6(3),e.hij("Verified : ",null!=t.user&&t.user.emailVerified?"verified":"not verified ","")}}function M(o,a){if(1&o&&(e.TgZ(0,"div",27)(1,"h3"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"h3"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"h3"),e._uU(8),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.hij("created at :",e.lcZ(3,3,null==t.user||null==t.user.metadata?null:t.user.metadata.creationTime)," "),e.xp6(3),e.hij("Last Sign in time :",e.lcZ(6,5,null==t.user||null==t.user.metadata?null:t.user.metadata.lastSignInTime)," "),e.xp6(3),e.hij("User Id : ",null==t.user?null:t.user.uid,"")}}function b(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",28)(1,"div",29)(2,"form",30)(3,"div",31)(4,"mat-form-field",32)(5,"mat-label"),e._uU(6,"Email"),e.qZA(),e.TgZ(7,"input",33),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.email=n)}),e.qZA()(),e.TgZ(8,"div")(9,"button"),e._uU(10,"set"),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.email)}}function A(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleInfo())}),e._uU(1,"Show information"),e.qZA()}}function O(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleInfo())}),e._uU(1,"Hide information"),e.qZA()}}function w(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"i",48),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.acivate=!1)}),e.qZA()}}function U(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"i",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.editName())}),e.qZA()}}function E(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",35)(2,"div",36)(3,"div",37)(4,"mat-form-field",38)(5,"mat-label"),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"input",39),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.newName=n)}),e.qZA()(),e.YNc(8,w,1,0,"i",40),e.YNc(9,U,1,0,"i",41),e.qZA()(),e.TgZ(10,"div",36)(11,"div")(12,"mat-form-field",42)(13,"mat-label"),e._uU(14,"Email"),e.qZA(),e._UZ(15,"input",43),e.qZA()()(),e.TgZ(16,"div",36)(17,"div")(18,"mat-form-field",42)(19,"mat-label"),e._uU(20,"Phone Number"),e.qZA(),e._UZ(21,"input",44),e.qZA()()(),e.TgZ(22,"div",36)(23,"div")(24,"mat-form-field",42)(25,"mat-label"),e._uU(26,"Id"),e.qZA(),e._UZ(27,"input",45),e.qZA()()()(),e.TgZ(28,"div",46)(29,"span",47),e._uU(30,"Meta information"),e.qZA(),e.TgZ(31,"div",36)(32,"div")(33,"h3"),e._uU(34,"Verification : "),e.TgZ(35,"span"),e._uU(36),e.qZA()()()(),e.TgZ(37,"div",36)(38,"div")(39,"h3"),e._uU(40,"created at : "),e.TgZ(41,"span"),e._uU(42),e.ALo(43,"date"),e.qZA()()()(),e.TgZ(44,"div",36)(45,"div")(46,"h3"),e._uU(47,"Last Sign in time : "),e.TgZ(48,"span"),e._uU(49),e.ALo(50,"date"),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(7),e.s9C("value",null==t.user?null:t.user.displayName),e.Q6J("ngModel",t.newName)("disabled",t.acivate),e.xp6(1),e.Q6J("ngIf",t.acivate),e.xp6(1),e.Q6J("ngIf",!t.acivate),e.xp6(6),e.s9C("value",null==t.user?null:t.user.email),e.xp6(6),e.s9C("value",null!=t.user&&t.user.phoneNumber?t.user.phoneNumber:"Not assigned"),e.xp6(6),e.s9C("value",null==t.user?null:t.user.uid),e.xp6(9),e.Oqu(null!=t.user&&t.user.emailVerified?"Email is verified":"email not verified "),e.xp6(6),e.Oqu(e.lcZ(43,11,null==t.user||null==t.user.metadata?null:t.user.metadata.creationTime)),e.xp6(7),e.Oqu(e.lcZ(50,13,null==t.user||null==t.user.metadata?null:t.user.metadata.lastSignInTime))}}function I(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"ngx-dropzone-preview",55),e.NdJ("removed",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onRemove(r))}),e.TgZ(1,"ngx-dropzone-label"),e._uU(2),e.qZA()()}if(2&o){const t=a.$implicit;e.Q6J("removable",!0),e.xp6(2),e.AsE("",t.name," (",t.type,")")}}function y(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"Change photo"),e.qZA())}function N(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"processing "),e._UZ(2,"i",56),e.qZA())}function D(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleShowPhoto())}),e.TgZ(1,"div",51),e.NdJ("click",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.stop(n))}),e.TgZ(2,"form",30)(3,"ngx-dropzone",52),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onSelect(n))}),e.TgZ(4,"ngx-dropzone-label"),e._uU(5,"Drop your new profile photo here"),e.qZA(),e.YNc(6,I,3,3,"ngx-dropzone-preview",53),e.qZA(),e.TgZ(7,"button",54),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sendImage())}),e.YNc(8,y,2,0,"span",20),e.YNc(9,N,3,0,"span",20),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.files),e.xp6(1),e.Q6J("disabled",t.disableButton),e.xp6(1),e.Q6J("ngIf",!t.photoLoadingFlag),e.xp6(1),e.Q6J("ngIf",t.photoLoadingFlag)}}let J=(()=>{class o{constructor(t,i,n,r,c){this._AuthService=t,this._AngularFireAuth=i,this._AngularFireStorage=n,this._ToastrService=r,this._DataService=c,this.email="",this.acivate=!0,this.newName="",this.showInfo=!1,this.files=[],this.photoUrl="",this.showEditPhoto=!1,this.photoLoadingFlag=!1,this.disableButton=!0}ngOnInit(){this.getUserData()}toggleShowPhoto(){this.showEditPhoto=!this.showEditPhoto}onSelect(t){console.log(t),this.files.push(t.addedFiles[0]),this.selectedPhoto=t.addedFiles[0],this.disableButton=!1}onRemove(t){this.files.splice(this.files.indexOf(t),1),this.disableButton=!0}uploadPhoto(t){var i=this;return(0,u.Z)(function*(){i.photoLoadingFlag=!0;const n=yield i._AngularFireAuth.currentUser;if(!n)throw new Error("No user is currently logged in.");const r=`users/${n.uid}/profile.jpg`,c=i._AngularFireStorage.ref(r);return yield i._AngularFireStorage.upload(r,t),yield c.getDownloadURL().toPromise()})()}sendImage(){var t=this;return(0,u.Z)(function*(){if(t.selectedPhoto){t.photoUrl=yield t.uploadPhoto(t.selectedPhoto);const i=yield t._AngularFireAuth.currentUser;i&&(i.updateProfile({photoURL:t.photoUrl}),t.disableButton=!0,t.photoLoadingFlag=!1,t.showEditPhoto=!1,t.files=[],t._ToastrService.success("profile photo updated successfully")),console.log("done"),console.log(t.photoUrl)}else console.log("erroror"),t._ToastrService.error("can't update profile photo right now")})()}toggleInfo(){this.showInfo=!this.showInfo}getUserData(){this._AuthService.getUserInfo().subscribe({next:t=>{console.log(t),this.user=t,this.newName=this.user.displayName},error:t=>{console.log(t)}})}editName(){this.acivate=!0,this.updateName(this.newName)}updateName(t){var i=this;return(0,u.Z)(function*(){const n=yield i._AngularFireAuth.currentUser;if(!n)throw new Error("failed updating name");n.updateProfile({displayName:t}),console.log("name updated")})()}stop(t){t.stopPropagation()}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(f.e),e.Y36(h.zQ),e.Y36(x.Q1),e.Y36(v._W),e.Y36(P.D))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile"]],standalone:!0,features:[e.jDz],decls:27,vars:11,consts:[[1,"main","container","d-none"],[1,"card","w-50","mx-auto","my-3"],["class","card-header",4,"ngIf"],["class","card-body",4,"ngIf"],["class","card-footer",4,"ngIf"],["class","edit-email position-fixed z-3 top-0 bottom-0 start-0 end-0 bg-danger d-flex justify-content-center align-items-center",4,"ngIf"],[1,"container","w-75","mt-4"],[1,"row","justify-content-between","align-items-center","shadow","rounded-2"],[1,"col-md-5"],[1,"row","justify-content-start","align-items-center","profile-top","p-2"],[1,"col-md-4"],[1,"position-relative","user-image"],["alt","User image",1,"w-100",3,"src"],[1,"layer","d-flex","justify-content-center","align-items-center","text-white"],[1,"fa","fa-edit",3,"click"],[1,"col-md-8"],[1,"user-info"],[1,"col-md-7"],[1,"p-3","info-buttons"],["class","btn btn-primary px-4 d-block ms-auto",3,"click",4,"ngIf"],[4,"ngIf"],["class","edit-photo position-fixed z-3 top-0 bottom-0 start-0 end-0  d-flex justify-content-center align-items-center",3,"click",4,"ngIf"],[1,"card-header"],["alt","User image",1,"d-block","mx-auto","rounded-circle",3,"src"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center"],["title","change email",1,"fa","fa-edit"],[1,"card-footer"],[1,"edit-email","position-fixed","z-3","top-0","bottom-0","start-0","end-0","bg-danger","d-flex","justify-content-center","align-items-center"],[1,"form"],["action",""],[1,"card","shadow","p-4"],["appearance","outline",1,"example-full-width"],["name","email","type","text","matInput","","placeholder","enter email",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","px-4","d-block","ms-auto",3,"click"],[1,"row","mt-5"],[1,"col-md-6"],[1,"position-relative","edit-name"],["appearance","outline",1,"w-100","position-relative"],["placeholder","name","type","text","matInput","",3,"ngModel","disabled","value","ngModelChange"],["class","fa fa-edit position-absolute   translate-middle-y",3,"click",4,"ngIf"],["class","fa-regular fa-square-check position-absolute fa-xl translate-middle-y",3,"click",4,"ngIf"],["appearance","outline",1,"w-100"],["disabled","","placeholder","Email","type","email","matInput","",3,"value"],["disabled","","placeholder","Phone","type","text","matInput","",3,"value"],["disabled","","placeholder","Id","type","text","matInput","",3,"value"],[1,"row","position-relative","bg-body-tertiary","p-4","mt-5","profile-bottom"],[1,"position-absolute","bg-body-secondary","text-center","fs-6","text-dark","py-2"],[1,"fa","fa-edit","position-absolute","translate-middle-y",3,"click"],[1,"fa-regular","fa-square-check","position-absolute","fa-xl","translate-middle-y",3,"click"],[1,"edit-photo","position-fixed","z-3","top-0","bottom-0","start-0","end-0","d-flex","justify-content-center","align-items-center",3,"click"],[1,"photo-form","bg-body-tertiary","rounded-2",3,"click"],[1,"w-100","m-auto",3,"change"],[3,"removable","removed",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-primary","d-block","m-auto","mt-3",3,"disabled","click"],[3,"removable","removed"],[1,"fa","fa-spinner","fa-spin","ms-2"]],template:function(i,n){1&i&&(e.TgZ(0,"section",0)(1,"div",1),e.YNc(2,Z,3,1,"div",2),e.YNc(3,T,9,3,"div",3),e.YNc(4,M,9,7,"div",4),e.qZA()(),e.YNc(5,b,11,1,"section",5),e.TgZ(6,"section",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),e._UZ(12,"img",12),e.TgZ(13,"div",13)(14,"i",14),e.NdJ("click",function(){return n.toggleShowPhoto()}),e.qZA()()()(),e.TgZ(15,"div",15)(16,"div",16)(17,"h3"),e._uU(18),e.qZA(),e.TgZ(19,"span"),e._uU(20),e.qZA()()()()(),e.TgZ(21,"div",17)(22,"div",18),e.YNc(23,A,2,0,"button",19),e.YNc(24,O,2,0,"button",19),e.qZA()()(),e.YNc(25,E,51,15,"div",20),e.qZA(),e.YNc(26,D,10,4,"section",21)),2&i&&(e.xp6(2),e.Q6J("ngIf",n.user),e.xp6(1),e.Q6J("ngIf",n.user),e.xp6(1),e.Q6J("ngIf",n.user),e.xp6(1),e.Q6J("ngIf",!1),e.xp6(7),e.Q6J("src",null==n.user?null:n.user.photoURL,e.LSH),e.xp6(6),e.Oqu(null==n.user?null:n.user.displayName),e.xp6(2),e.Oqu(null==n.user?null:n.user.email),e.xp6(3),e.Q6J("ngIf",!n.showInfo),e.xp6(1),e.Q6J("ngIf",n.showInfo),e.xp6(1),e.Q6J("ngIf",n.showInfo),e.xp6(1),e.Q6J("ngIf",n.showEditPhoto))},dependencies:[_.ez,_.sg,_.O5,_.uU,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,g.m,m.KE,m.hX,C.Nt,d._f,d.NP,d.dt],styles:["@media screen and (max-width: 768px){.card[_ngcontent-%COMP%]{width:100%!important}}img[_ngcontent-%COMP%]{width:100px}i[_ngcontent-%COMP%]{cursor:pointer}.profile-top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3125rem;font-weight:500;text-transform:capitalize;margin:0}.profile-top[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#00000080}.profile-bottom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{bottom:100%;left:0}.profile-bottom[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--main-color);font-weight:500}.profile-bottom[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;font-weight:lighter}mat-form-field[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{color:var(--main-color)!important}mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{color:#000!important}.edit-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:30px;right:15px;cursor:pointer}.user-image[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:50%;height:95px}.user-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.user-image[_ngcontent-%COMP%]:hover   .layer[_ngcontent-%COMP%]{bottom:0}.user-image[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]{position:absolute;bottom:-100%;left:0;background-color:#00000080;width:100%;height:35px;transition:all .5s ease-out}.edit-photo[_ngcontent-%COMP%]{background-color:#00000080}.edit-photo[_ngcontent-%COMP%]   .photo-form[_ngcontent-%COMP%]{padding:15px;width:700px}@media screen and (max-width: 768px){.user-info[_ngcontent-%COMP%]{text-align:center}.user-image[_ngcontent-%COMP%]{height:250px;margin-bottom:20px}.info-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%!important}}"]})}return o})()}}]);